---
operationId: post_users_id_avatar

x-box-tag: avatars

summary: Post user avatar

tags:
  - User avatars

description: |-
  Uploads or updates an image of a the user's avatar.

parameters:
  - $ref: ../attributes/user_id.yml
  - name: ff_enable_user_avatar_api
    description: |-
      Enables user avatar operations
    example: 'yes'
    in: header
    required: true
    schema:
      type: string
      enum:
        - 'yes'
        - 'no'
requestBody:
  content:
    multipart/form-data:
      schema:
        type: object
        required:
          - pic
        properties:
          pic:
            type: string
            format: binary
            description: |-
              The user avatar. Accepted file formats are `.jpg` or `.png`.
              The maximum file size is 1MB.
            example: my_avatar.jpg
      encoding:
        pic:
          contentType: image/png, image/jpeg


responses:
  200:
    description: |-
      Returned if an existing avatar is successfully updated.
    content:
      application/json:
        schema:
          $ref: '#/components/schemas/UserAvatar'
  201:
    description: |-
      Returned if an avatar is successfully uploaded.
    content:
      application/json:
        schema:
          $ref: '#/components/schemas/UserAvatar'
  400:
    description: |-
      Returned when:
      * an image isn't included in the request
      * the image type is unsupported
      * the image is too large
    content:
      application/json:
        schema:
          $ref: '#/components/schemas/ClientError'
  403:
    description: |-
      Returned if the user does not have the necessary permissions.
      or is not activated.
    content:
      application/json:
        schema:
          $ref: '#/components/schemas/ClientError'
  404:
    description: |-
      Returned if the user does not exist or cannot be found.
    content:
      application/json:
        schema:
          $ref: '#/components/schemas/ClientError'
  405:
    description: |-
      Returned if the `ff_enable_user_avatar_api` parameter is set to `no`.
    content:
      application/json:
        schema:
          $ref: '#/components/schemas/ClientError'
  500:
    description: |-
      Returned if the user avatar is not saved successfully.
    content:
      application/json:
        schema:
          $ref: '#/components/schemas/ClientError'
  503:
    description: |-
      Returned if the user avatar is not saved successfully.
    content:
      application/json:
        schema:
          $ref: '#/components/schemas/ClientError'
  default:
    description: An unexpected client error.
    content:
      application/json:
        schema:
          $ref: '#/components/schemas/ClientError'
