---
operationId: post_folders_id_metadata_id_id

summary: Create metadata instance on folder

tags:
  - Metadata instances (Folders)

x-box-reference-category: folder_metadata

description: |-
  Applies an instance of a metadata template to a folder.

  In most cases only values that are present in the metadata template
  will be accepted, except for the `global.properties` template which accepts
  any key-value pair.

parameters:
  - $ref: '../attributes/folder_id.yml'
  - $ref: '../attributes/metadata_scope.yml'
  - $ref: '../attributes/metadata_template_key.yml'

requestBody:
  content:
    application/json:
      schema:
        type: object
        example:
          name: "Aaron Levie"
        additionalProperties:
          type: string
          description: |-
            A value for each of the fields that are present on the metadata
            template.

            For the `global.properties` template this can be an a list of zero
            or more fields, as this template allows for any generic key-value
            pairs to be stored on the template.
          example: "Aaron Levie"

responses:
  201:
    description: |-
      Returns the instance of the template that was applied to the folder,
      including the data that was applied to the template.
    content:
      application/json:
        schema:
          $ref: '#/components/schemas/Metadata'

  400:
    description: |-
      Returned an error when the request body is not valid.

      * `schema_validation_failed` - The request body contains values for fields
      that either do not exist on the metadata template, or are of the wrong
      type.
    content:
      application/json:
        schema:
          $ref: '#/components/schemas/ClientError'

  409:
    description: |-
      Returns an error when an instance of this metadata template is already
      present on the folder.

      * `tuple_already_exists` - An instance of them metadata template already
      exists on the file.
    content:
      application/json:
        schema:
          $ref: '#/components/schemas/ClientError'

  default:
    description: |-
      An unexpected client error.
    content:
      application/json:
        schema:
          $ref: '#/components/schemas/ClientError'
